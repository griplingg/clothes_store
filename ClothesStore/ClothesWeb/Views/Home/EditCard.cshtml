@model ClothesWeb.Models.Product

@{
    ViewData["Title"] = "Редактирование товара";
}

<div>
    <h2 class="text-center">Редактирование карточки товара</h2>

    <form asp-controller="Home" asp-action="EditCard" method="post">
        @Html.AntiForgeryToken()
        <input type="hidden" asp-for="Id" />
        <input type="hidden" name="searchString" value="@ViewBag.SearchString" />
        <div asp-validation-summary="All"></div>
        <div class="mb-3">
            <label asp-for="Name">Название</label>
            <input asp-for="Name"  />
        </div>

        <div class="mb-3">
            <label asp-for="Price">Цена</label>
            <input asp-for="Price"/>
        </div>

        <div class="mb-3">
            <label asp-for="Color">Цвет</label>
            <input asp-for="Color"/>
        </div>

        <p>
            <small>
                Размеры:
                @if (Model.ProductSizes != null && Model.ProductSizes.Any())
                {

                    @(string.Join(", ", Model.ProductSizes.Select(ps =>
                        $"{ps.Size.Name} ({ps.Quantity})"
                        )))
                }
                else
                {
                    <span>нет в наличии</span>
                }
            </small>
        </p>

        <div>
            <label asp-for="SupplierId">ID поставщика</label>
            <input asp-for="SupplierId"/>
        </div>

        <button type="submit"> Сохранить изменения</button>
        
       
        
        @if (!string.IsNullOrEmpty(ViewBag.SearchString))
        {
            <a asp-action="Catalog" asp-route-searchString="@ViewBag.SearchString"> Назад</a>
        }
        else
        {
            <a asp-action="Catalog">Назад</a>
        }
    </form>
</div>
